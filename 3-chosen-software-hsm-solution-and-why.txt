################################################################################
RECOMMENDED SOFTWARE HSM FOR TI SOC DEVELOPMENT
################################################################################

This document summarizes the requirements for a software HSM solution
during the development and testing phases for a Texas Instruments SoC
reference board implementation, and recommends the most suitable option
based on those needs.

================================================================================
USER REQUIREMENTS
================================================================================

The key requirements for the software HSM solution are:

1. Target Platform: Texas Instruments SoC reference board implementation.
2. Development Stage: Primarily for development and testing.
3. Cost-Effectiveness: No additional financial outlay for implementing a
   secure solution during development and testing stages.
4. Hardware HSM Migration: Easy transfer to a production-grade hardware
   HSM solution with minimum or no effort.
5. PKCS#11-Based: The solution must provide a PKCS#11 interface.

================================================================================
PKCS#11-BASED SOFTWARE HSM SOLUTIONS
================================================================================

Here are the possible PKCS#11-based software HSM solutions:

1. SoftHSMv2:
   - Description: A widely used open-source implementation of a cryptographic
     store that provides a PKCS#11 interface. It's developed as part of the
     OpenDNSSEC project and is designed for exploring PKCS#11 without needing a
     physical Hardware Security Module.
   - Pros: Free, open-source, and specifically designed for development and
     testing.
   - Cons: Keys are stored in files, which is less secure than hardware-backed
     solutions.

2. OpenSC:
   - Description: An open-source project primarily for smart cards, but it also
     provides a PKCS#11 interface that can be used with software tokens.
   - Pros: Free, open-source, and mature.
   - Cons: Can be more complex to set up for software-only use cases.

3. BouncyHsm:
   - Description: A software simulator of an HSM and smartcard with an HTML UI,
     REST API, and PKCS#11 interface.
   - Pros: Provides multiple interfaces (PKCS#11, REST, UI) for development and
     testing.
   - Cons: Newer and less widely used than SoftHSM.

4. pkcs11-provider:
   - Description: A Go-based implementation of a PKCS#11 provider and software
     HSM.
   - Pros: Modern implementation in Go.
   - Cons: Less mature than other options.

5. tpm2-pkcs11:
   - Description: A TPM-backed software HSM that provides a PKCS#11 interface.
     It uses the Trusted Platform Module (TPM) on a device for hardware-backed
     key storage.
   - Pros: Provides hardware-backed security using the TPM.
   - Cons: Requires a device with a TPM, and TPM performance is slower than
     dedicated HSMs.

================================================================================
ANALYSIS AND RECOMMENDATION
================================================================================

All the listed solutions meet the PKCS#11 requirement. However, based on the
other requirements, we can narrow down the options.

For a solution that is free, easy to set up for development and testing on a
TI SoC, and provides a clear path to a hardware HSM, **SoftHSMv2 remains the
strongest recommendation.**

Justification:
-------------

1. Cost-Effectiveness (No Additional Money):
   - SoftHSM is entirely free and open-source.

2. Easy Transfer to Hardware HSM:
   - By developing against the standard PKCS#11 API provided by SoftHSM, the
     application can be easily migrated to a hardware HSM with minimal or no
     code changes.

3. Suitability for Development and Testing:
   - SoftHSM is specifically designed for this purpose, providing a functional
     environment for building and validating cryptographic operations.

While **tpm2-pkcs11** is an interesting option because it provides
hardware-backed keys, it has the overhead of requiring a TPM on the
development board and dealing with the complexities of TPMs. For the initial
development and testing phase, the simplicity of SoftHSM is a significant
advantage. The other solutions are also viable but are either less mature or
more complex to set up than SoftHSM.

Therefore, for projects aiming for a cost-free development and testing
phase with a clear path to hardware HSM integration, **SoftHSMv2** is the most
appropriate software HSM solution.

================================================================================
SOFTHSM VS SOFTHSMV2
================================================================================

SoftHSMv2 is the modern, recommended version of SoftHSM. It offers several
key improvements over its predecessor:

1. Enhanced Security:
   - SoftHSMv2 prioritizes higher security by encrypting sensitive data and
     utilizing unswappable memory to protect keys from being swapped to
     disk.

2. Flexible Cryptographic Backends:
   - It provides more flexibility by allowing the choice between Botan or
     OpenSSL for cryptographic operations, whereas v1 was more tightly
     coupled.

3. Structured Configuration:
   - It uses a more organized configuration approach with a dedicated file
     (e.g., /etc/softhsm2.conf) and a utility tool (`softhsm2-util`) for
     token management.

4. Migration Path:
   - SoftHSMv2 includes a migration tool to convert token databases from the
     v1 format, indicating advancements in token storage and management.

In summary, SoftHSMv2 should be used for all new projects due to its improved
security, flexibility, and more modern architecture.
